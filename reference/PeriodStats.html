<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Daily stats for a given time period — PeriodStats • ContDataQC</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Daily stats for a given time period — PeriodStats" />
<meta property="og:description" content="Generates daily stats (N, mean, min, max, range, std deviation) for the
specified time period before a given date. Output is a multiple column CSV
(Date and Parameter Name by statistic) and a report (HTML or DOCX) with plots.
Input is the ouput file of the QC operation of ContDataQC()." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ContDataQC</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.5.9059</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/ContDataQC_Vignette.html">ContDataQC Vignette</a>
    </li>
    <li>
      <a href="../articles/Vignette_Config.html">ContDataQC, Custom Config Files</a>
    </li>
    <li>
      <a href="../articles/Vignette_Lakes.html">ContDataQC Lake ID String Vignette</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/leppott/ContDataQC/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Daily stats for a given time period</h1>
    <small class="dont-index">Source: <a href='https://github.com/leppott/ContDataQC/blob/master/R/fun.PeriodStats.R'><code>R/fun.PeriodStats.R</code></a></small>
    <div class="hidden name"><code>PeriodStats.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Generates daily stats (N, mean, min, max, range, std deviation) for the
specified time period before a given date. Output is a multiple column CSV
(Date and Parameter Name by statistic) and a report (HTML or DOCX) with plots.
Input is the ouput file of the QC operation of ContDataQC().</p>
    </div>

    <pre class="usage"><span class='fu'>PeriodStats</span><span class='op'>(</span>
  <span class='va'>fun.myDate</span>,
  fun.myDate.Format <span class='op'>=</span> <span class='cn'>NA</span>,
  fun.myPeriod.N <span class='op'>=</span> <span class='fl'>30</span>,
  fun.myPeriod.Units <span class='op'>=</span> <span class='st'>"d"</span>,
  <span class='va'>fun.myFile</span>,
  fun.myDir.import <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>getwd</a></span><span class='op'>(</span><span class='op'>)</span>,
  fun.myDir.export <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>getwd</a></span><span class='op'>(</span><span class='op'>)</span>,
  <span class='va'>fun.myParam.Name</span>,
  fun.myDateTime.Name <span class='op'>=</span> <span class='st'>"Date.Time"</span>,
  fun.myDateTime.Format <span class='op'>=</span> <span class='cn'>NA</span>,
  fun.myThreshold <span class='op'>=</span> <span class='cn'>NA</span>,
  fun.myConfig <span class='op'>=</span> <span class='st'>""</span>,
  fun.myReport.format <span class='op'>=</span> <span class='st'>""</span>,
  fun.myReport.Dir <span class='op'>=</span> <span class='st'>""</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>fun.myDate</th>
      <td><p>Benchmark date.</p></td>
    </tr>
    <tr>
      <th>fun.myDate.Format</th>
      <td><p>Format of benchmark date.  This should be the same
format of the date in the data file.  Default is %Y-%m-%d (e.g., 2017-12-31).</p></td>
    </tr>
    <tr>
      <th>fun.myPeriod.N</th>
      <td><p>Period length.  Default = 30.</p></td>
    </tr>
    <tr>
      <th>fun.myPeriod.Units</th>
      <td><p>Period units (days or years written as d or y).  Default is d.</p></td>
    </tr>
    <tr>
      <th>fun.myFile</th>
      <td><p>Filename (no directory) of data file.  Must be CSV file.</p></td>
    </tr>
    <tr>
      <th>fun.myDir.import</th>
      <td><p>Directory for import data.  Default is current working directory.</p></td>
    </tr>
    <tr>
      <th>fun.myDir.export</th>
      <td><p>Directory for export data.  Default is current working directory.</p></td>
    </tr>
    <tr>
      <th>fun.myParam.Name</th>
      <td><p>Column name in myFile to perform summary statistics.
One or two parameters can be specified.</p></td>
    </tr>
    <tr>
      <th>fun.myDateTime.Name</th>
      <td><p>Column name in myFile for date time.  Default = "Date.Time".</p></td>
    </tr>
    <tr>
      <th>fun.myDateTime.Format</th>
      <td><p>Format of DateTime field.  Default = %Y-%m-%d %H:%M:%S.</p></td>
    </tr>
    <tr>
      <th>fun.myThreshold</th>
      <td><p>Value to draw line on plot.  For example, a regulatory limit.
Default = NA</p></td>
    </tr>
    <tr>
      <th>fun.myConfig</th>
      <td><p>Configuration file to use for this data analysis.
The default is always loaded first so only "new" values need to be included.  This is the easiest way to control date and time formats.</p></td>
    </tr>
    <tr>
      <th>fun.myReport.format</th>
      <td><p>Report format (docx or html).
Default is specified in config.R (docx).Can be customized in config.R; ContData.env$myReport.Format.</p></td>
    </tr>
    <tr>
      <th>fun.myReport.Dir</th>
      <td><p>Report (rmd) template folder.
Default is the package rmd folder.  Can be customized in config.R; ContData.env$myReport.Dir.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns a csv with daily means and a PDF summary with plots into the
specified export directory for the specified time period before the given date.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The input is output file of the QC operation in ContDataQC().  That is, a file with
Date.Time, and parameters (matching formats in config.R).</p>
<p>To get different periods (30, 60, or 90 days) change function input "fun.myPeriod.N".
It is possible to provide a vector for Period.N and Period.Units.
If the date range is longer than that in the data provided the stats will not calculate properly.</p>
<p>The dates must be in the standard format (Y-m-d) or the function may not work as intended.
For example, the date is used in the file name and dates with "/" will result in an invalid file name.</p>
<p>One or two parameters can be analyzed at a time.
If provide 2 parameters both will produce period statistic summaries.
And the plots will have both parameters.  The 2nd parameter will be on the 2nd (right) y-axis.</p>
<p>Requires doBy library for the period statistics summary and rmarkdown for the report.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span class='co'># Save example files from Package to use for example</span>
<span class='co'>## This step not needed for users working on their own files</span>
<span class='va'>df.x</span> <span class='op'>&lt;-</span> <span class='va'>DATA_period_test2_Aw_20130101_20141231</span>
<span class='fu'><a href='https://rdrr.io/r/utils/write.table.html'>write.csv</a></span><span class='op'>(</span><span class='va'>df.x</span>,<span class='st'>"DATA_period_test2_Aw_20130101_20141231.csv"</span><span class='op'>)</span>
<span class='va'>myFile</span> <span class='op'>&lt;-</span> <span class='st'>"config.ExcludeFailsFalse.R"</span>
<span class='fu'><a href='https://rdrr.io/r/base/files.html'>file.copy</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/find.package.html'>path.package</a></span><span class='op'>(</span><span class='st'>"ContDataQC"</span><span class='op'>)</span>, <span class='st'>"extdata"</span>, <span class='va'>myFile</span><span class='op'>)</span>
          , <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>getwd</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='va'>myFile</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] FALSE</div><div class='input'><span class='co'>#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>

<span class='co'># Load File to use for PeriodStats</span>
<span class='va'>myDir</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>getwd</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>myFile</span> <span class='op'>&lt;-</span> <span class='st'>"DATA_period_test2_Aw_20130101_20141231.csv"</span>
<span class='va'>df.x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.csv</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='va'>myDir</span>, <span class='va'>myFile</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># function inputs</span>
<span class='va'>myDate</span> <span class='op'>&lt;-</span> <span class='st'>"2013-09-30"</span>
<span class='va'>myDate.Format</span> <span class='op'>&lt;-</span> <span class='st'>"%Y-%m-%d"</span>
<span class='va'>myPeriod.N</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>30</span>, <span class='fl'>60</span>, <span class='fl'>90</span>, <span class='fl'>120</span>, <span class='fl'>1</span><span class='op'>)</span>
<span class='va'>myPeriod.Units</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"d"</span>, <span class='st'>"d"</span>, <span class='st'>"d"</span>, <span class='st'>"d"</span>, <span class='st'>"y"</span><span class='op'>)</span>
<span class='va'>myFile</span> <span class='op'>&lt;-</span> <span class='st'>"DATA_period_test2_Aw_20130101_20141231.csv"</span>
<span class='va'>myDir.import</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>getwd</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>myDir.export</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>getwd</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>myParam.Name</span> <span class='op'>&lt;-</span> <span class='st'>"Water.Temp.C"</span>
<span class='va'>myDateTime.Name</span> <span class='op'>&lt;-</span> <span class='st'>"Date.Time"</span>
<span class='va'>myDateTime.Format</span> <span class='op'>&lt;-</span> <span class='st'>"%Y-%m-%d %H:%M:%S"</span>
<span class='va'>myThreshold</span> <span class='op'>&lt;-</span> <span class='fl'>20</span>
<span class='va'>myConfig</span> <span class='op'>&lt;-</span> <span class='st'>""</span>
<span class='va'>myReport.format</span> <span class='op'>&lt;-</span> <span class='st'>"docx"</span>
<span class='co'># Custom Config</span>
<span class='va'>myConfig.Fail.Include</span>  <span class='op'>&lt;-</span> <span class='st'>"config.ExcludeFailsFalse.R"</span>

<span class='co'># Run Function</span>
<span class='co'>## Example 1. default report format (html)</span>
<span class='fu'>PeriodStats</span><span class='op'>(</span><span class='va'>myDate</span>
          , <span class='va'>myDate.Format</span>
          , <span class='va'>myPeriod.N</span>
          , <span class='va'>myPeriod.Units</span>
          , <span class='va'>myFile</span>
          , <span class='va'>myDir.import</span>
          , <span class='va'>myDir.export</span>
          , <span class='va'>myParam.Name</span>
          , <span class='va'>myDateTime.Name</span>
          , <span class='va'>myDateTime.Format</span>
          , <span class='va'>myThreshold</span>
          , <span class='va'>myConfig</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "WORKING on parameter (1/1); Water.Temp.C"
#&gt; QC Flag field was found and 79 fails were excluded based on user's config file.</div><div class='output co'>#&gt; Task complete.  Data (CSV) and report ( DOCX ) files saved to directory:
#&gt; /private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/RtmpL0Ui5o/file6bf38479916/reference</div><div class='input'>
<span class='co'>## Example 2. DOCX report format</span>
<span class='fu'>PeriodStats</span><span class='op'>(</span><span class='va'>myDate</span>
          , <span class='va'>myDate.Format</span>
          , <span class='va'>myPeriod.N</span>
          , <span class='va'>myPeriod.Units</span>
          , <span class='va'>myFile</span>
          , <span class='va'>myDir.import</span>
          , <span class='va'>myDir.export</span>
          , <span class='va'>myParam.Name</span>
          , <span class='va'>myDateTime.Name</span>
          , <span class='va'>myDateTime.Format</span>
          , <span class='va'>myThreshold</span>
          , <span class='va'>myConfig</span>
          , <span class='va'>myReport.format</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "WORKING on parameter (1/1); Water.Temp.C"
#&gt; QC Flag field was found and 79 fails were excluded based on user's config file.</div><div class='output co'>#&gt; Task complete.  Data (CSV) and report ( DOCX ) files saved to directory:
#&gt; /private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/RtmpL0Ui5o/file6bf38479916/reference</div><div class='input'>
<span class='co'>## Example 3. DOCX report format and Include Flag Failures</span>
<span class='fu'>PeriodStats</span><span class='op'>(</span><span class='va'>myDate</span>
          , <span class='va'>myDate.Format</span>
          , <span class='va'>myPeriod.N</span>
          , <span class='va'>myPeriod.Units</span>
          , <span class='va'>myFile</span>
          , <span class='va'>myDir.import</span>
          , <span class='va'>myDir.export</span>
          , <span class='va'>myParam.Name</span>
          , <span class='va'>myDateTime.Name</span>
          , <span class='va'>myDateTime.Format</span>
          , <span class='va'>myThreshold</span>
          , <span class='va'>myConfig.Fail.Include</span>
          , <span class='va'>myReport.format</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "WORKING on parameter (1/1); Water.Temp.C"
#&gt; QC Flag field was found and fails were all included based on user's config file.</div><div class='output co'>#&gt; Task complete.  Data (CSV) and report ( DOCX ) files saved to directory:
#&gt; /private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/RtmpL0Ui5o/file6bf38479916/reference</div><div class='input'>
<span class='co'>## Example 4. DOCX report format with two parameters</span>
<span class='va'>myParam.Name</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Water.Temp.C"</span>, <span class='st'>"Sensor.Depth.ft"</span><span class='op'>)</span>
<span class='fu'>PeriodStats</span><span class='op'>(</span><span class='va'>myDate</span>
          , <span class='va'>myDate.Format</span>
          , <span class='va'>myPeriod.N</span>
          , <span class='va'>myPeriod.Units</span>
          , <span class='va'>myFile</span>
          , <span class='va'>myDir.import</span>
          , <span class='va'>myDir.export</span>
          , <span class='va'>myParam.Name</span>
          , <span class='va'>myDateTime.Name</span>
          , <span class='va'>myDateTime.Format</span>
          , <span class='va'>myThreshold</span>
          , <span class='va'>myConfig</span>
          , <span class='va'>myReport.format</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "WORKING on parameter (1/2); Water.Temp.C"
#&gt; QC Flag field was found and fails were all included based on user's config file.
#&gt; [1] "WORKING on parameter (2/2); Sensor.Depth.ft"
#&gt; QC Flag field was found and fails were all included based on user's config file.</div><div class='output co'>#&gt; Task complete.  Data (CSV) and report ( DOCX ) files saved to directory:
#&gt; /private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/RtmpL0Ui5o/file6bf38479916/reference</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Erik W Leppo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


